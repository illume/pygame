# travisci continuous integration config file.

language: python
matrix:
    include:
        - os: linux
          sudo: required
          python: 2.7
        - os: linux
          sudo: required
          python: 3.4
        - os: linux
          sudo: required
          python: 3.5
        - os: osx
          language: generic
          env: PY_VERSION=3
        - os: osx
          language: generic
          env: PY_VERSION=2
# command to install
install:
#  - pip install . --use-mirrors
#  - pip install -r requirements.txt --use-mirrors
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then PYTHON_EXE=python PIP_CMD=pip; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then source .travis_osx.sh; fi
  - $PIP_CMD install --upgrade setuptools pip
  - $PIP_CMD install --upgrade numpy
  - $PYTHON_EXE config.py -auto
  - $PYTHON_EXE setup.py install -noheaders

env:
  global:
    - SDL_VIDEODRIVER=dummy
    - SDL_AUDIODRIVER=disk

# command to run tests
script: 
  - $PYTHON_EXE -m pygame.tests.__main__ --exclude opengl


# Here we install the ubuntu dependencies with apt-get.
before_install:
    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update; fi
    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install sdl sdl_image sdl_mixer sdl_ttf smpeg jpeg libpng portmidi freetype; fi
    - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo apt-get update; fi
    - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo apt-get install python-dev libsdl-image1.2-dev libsdl-mixer1.2-dev libsdl-ttf2.0-dev libsdl1.2-dev python-numpy libportmidi-dev libjpeg-dev libtiff4-dev libx11-6 libX11-dev xfonts-base xfonts-100dpi xfonts-75dpi xfonts-cyrillic; fi  


# Here we can notify the pygame irc chat.

#notifications:
#  irc:
#    channels: "irc.freenode.org#pygame"
#    on_success: change
#    on_failure: change
